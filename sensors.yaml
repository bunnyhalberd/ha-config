#
# Manually defined sensors
#

### MQTT

- platform: mqtt
  name: "Second Life Concurrency"
  state_topic: "external/secondlife/concurrency"
  unit_of_measurement: "resis"
  icon: mdi:account-group

# Weather

# So, uh, I have no idea who's sensor this is, but hey, I'm gonna use
# the data! 😁

- platform: mqtt
  name: "Outside Temperature"
  state_topic: "weather/Fineoffset-WHx080/temperature_F"
  unit_of_measurement: "°F"
  device_class: temperature
  icon: mdi:thermometer

- platform: mqtt
  name: "Outside Humidity"
  state_topic: "weather/Fineoffset-WHx080/humidity"
  unit_of_measurement: "%"
  device_class: humidity
  icon: mdi:water-percent

- platform: mqtt
  name: "Wind Bearing"
  state_topic: "weather/Fineoffset-WHx080/wind_dir_deg"
  unit_of_measurement: "deg"
  icon: mdi:compass

- platform: mqtt
  name: "Wind Speed (Avg)"
  state_topic: "weather/Fineoffset-WHx080/wind_avg_mi_h"
  unit_of_measurement: "mph"
  icon: mdi:weather-windy

- platform: mqtt
  name: "Wind Speed (Max)"
  state_topic: "weather/Fineoffset-WHx080/wind_max_mi_h"
  unit_of_measurement: "mph"
  icon: mdi:weather-windy

- platform: mqtt
  name: "Rain Amount"
  state_topic: "weather/Fineoffset-WHx080/rain_in"
  unit_of_measurement: "inches"
  icon: mdi:weather-rainy
### End MQTT

- platform: template
  sensors:
    wind_direction:
      value_template: >
        {% set direction = ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW','N'] %}
        {% set degree = states('sensor.wind_bearing')|float %}
        {{ direction[((degree+11.25)/22.5)|int] }}
